% Generated by Sphinx.
\def\sphinxdocclass[english]{xmosmodern}
\documentclass[  document]{xmosmodern}
\usepackage[utf8]{inputenc}
\DeclareUnicodeCharacter{00A0}{\nobreakspace}

\usepackage{longtable}



\title{SD card Demo Quickstart Guide}
\date{December 16, 2013}
\author{}
\newcommand{\sphinxlogo}{}
\newcommand{\releasename}{Release}
\usepackage{xsphinx}
\usepackage{threeparttable}
\usepackage{fancyvrb}
\usepackage{indent}
\renewcommand\bfcode\textbf
\renewcommand\bf\textbf
\graphicspath{{./}{./images/}}
\makeindex

\newcommand\PYGZat{@}
\newcommand\PYGZlb{[}
\newcommand\PYGZrb{]}

\setlength{\emergencystretch}{8em}
\start

\maketitle
\pretoc
\phantomsection\label{quickstart::doc}

%last summary
\begin{inthisdocument}
\item \nameref{quickstart:sc-sdcard-demo-quick-start-guide}
\end{inthisdocument}


% NON-FULLWIDTH SECTION



% NON-FULLWIDTH SECTION
\section{sc\_sdcard demo : Quick Start Guide}
\label{quickstart:sc-sdcard-demo-quick-start-guide}\label{quickstart:sdcard-demo-quickstart}\label{quickstart:sd-card-demo-quickstart-guide}\begin{description}
\item[In this demonstration we use the following hardware and software:]\begin{itemize}
\item   XP-SKC-L16 sliceKIT

\item   xTAG2

\item   XA-SK-FLASH 1V0 Flash slice

\item   module\_FatFs

\item   module\_sdcardSPI,

\item   module\_spi\_master,

\end{itemize}


\end{description}



together to read/write files on SD card through SPI interface. This application showcases some of the key software
features of SD card module and FAT filesystem module. At the end it prints read/write performances of FAT Filesystem on SD card using SPI interface



% NON-FULLWIDTH SECTION
\subsection{Hardware Setup}
\label{quickstart:hardware-setup}

The XP-SKC-L16 sliceKIT Core board has four slots with edge connectors: \verb`SQUARE`, \verb`CIRCLE`, \verb`TRIANGLE`
and \verb`STAR`.


To setup up the system:
\begin{enumerate}
\item   Connect XA-SK-FLASH 1V0 Slice Card to the XP-SKC-L16 sliceKIT Core board using the connector marked with the \verb`TRIANGLE`.

\item   Connect the xTAG Adapter to sliceKIT Core board, and connect xTAG-2 to the adapter.

\item   Connect the xTAG-2 to host PC. Note that the USB cable is not provided with the sliceKIT starter kit.

\item   Set the \verb`XMOS LINK` to \verb`OFF` on the xTAG Adapter(XA-SK-XTAG2).

\item   Make sure the SD card slot in XA-SK-FLASH slice has a Class-4 SD card in it.

\item   Switch on the power supply to the sliceKIT Core board.

\end{enumerate}




% NON-FULLWIDTH SECTION
\subsection{Import and Build the Application}
\label{quickstart:import-and-build-the-application}\begin{enumerate}
\item   Open xTIMEcomposer and check that it is operating in online mode. Open the edit perspective (Window-\textgreater{}Open Perspective-\textgreater{}XMOS Edit).

\item   Locate the \verb`'SD card demo'` item in the xSOFTip pane on the bottom left of the window and drag it into the Project Explorer window in the xTIMEcomposer. This will also cause the modules on which this application depends to be imported as well.

\item   Click on the app\_sdcard\_test item in the Explorer pane then click on the build icon (hammer) in xTIMEcomposer. Check the console window to verify that the application has built successfully.

\end{enumerate}




% NON-FULLWIDTH SECTION
\subsection{Run the Application}
\label{quickstart:run-the-application}

Now that the application has been compiled, the next step is to run it on the sliceKIT Core Board using the tools to load the application over JTAG (via the xTAG-2 and xTAG Adapter card) into the xCORE multicore microcontroller.
\begin{enumerate}
\item   Select the file \verb`app_sdcard_test.xe` in the \verb`app_sdcard_test` project from the Project Explorer.

\item   Click on the \verb`Run` icon (the white arrow in the green circle).

\item   At the \verb`Select Device` dialog select \verb`XMOS xTAG-2 connect to L1[0..1]` and click \verb`OK`.

\item   The application starts executing and reads/writes contents into SD card.

\end{enumerate}




% NON-FULLWIDTH SECTION
\subsection{Next Steps}
\label{quickstart:next-steps}\begin{enumerate}
\item   Try altering the size of file and make sure file sizes during write/read operations are still accurate. You can do so by reducing the size of Buff which is initialized with 40 blocks (each 512 bytes).

\item   You can vary the speed of SPI clock and see if that makes any difference. You can do so by changing the second parameter in spi\_master\_init() function called in disk\_initialize() in module\_sdcardSPI/src/SDCardHostSPI.xc.

\end{enumerate}





\finish
